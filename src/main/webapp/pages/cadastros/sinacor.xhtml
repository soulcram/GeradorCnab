<ui:composition template="/pages/cadastros/home.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui">

	<ui:define name="conteudo">

		<h:form id="formRequisicao">

			<p:messages id="messages" showDetail="true" closable="true">
				<p:autoUpdate />
			</p:messages>
			
			

			<p:panelGrid columns="1" layout="grid">
				<f:facet name="header">
	        			Sinacor
	    		</f:facet>
	    		<h:outputText value="Url Authentication: http://localhost:5584/solucoesFromtis/auth_sinacor/oauth/token"/>
	    		<h:outputText value="Url Finance: http://localhost:5584/solucoesFromtis/api/withdraw/adm/adm-fund"/>
				<p:commandButton value="Atualizar"
					action="#{sinacorController.atualizaOperacoes}"
					update=":formRequisicao:resultadoOperacoes" />

				<p:commandButton value="Remover Todos"
								 action="#{sinacorController.removerTudo}"
								 update=":formRequisicao:resultadoOperacoes" />
			</p:panelGrid>

			<p:dataTable id="resultadoOperacoes"
					value="#{sinacorController.operacoes}" var="item" paginator="true"
					rows="10" widgetVar="tabela">
			
				<p:column headerText="Codigo Sinacor" sortBy="#{item.account}" filterBy="#{item.account}" filterMatchMode="contains">
					<h:outputText value="#{item.account}" />
				</p:column>

				<p:column headerText="Valor da TED">
					<h:outputText value="#{item.amount}" />
				</p:column>

				<p:column headerText="Nome Cedente">
					<h:outputText value="#{item.receiver.name}" />
				</p:column>

				<p:column headerText="Ações">
					<p:commandButton id="btnDownloadJson" value="Download" action="#{sinacorController.download(item)}" ajax="false" />
					<p:commandButton id="btnDeleta" value="Deleta" action="#{sinacorController.removeOperacao(item)}" update=":formRequisicao:resultadoOperacoes"  />
					
				</p:column>
				
			</p:dataTable>
		</h:form>
		
	</ui:define>
</ui:composition>
